/**
 * Generated script for New Relic Synthetics
 * Generated using se-builder with New Relic Synthetics Formatter
 *
 * Welcome to the Synthetics JavaScript IDE - Browser Edition
 * You can think of it like node.js lite. Everything you'd expect to find in a
 * node.js environment is also available here, with a few notable exceptions:
 *
 * - 'require' is limited to a useful subset of modules, get the full list from
 *   https://docs.newrelic.com/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers
 *
 * - We've added a few top-level vars to the scope, all starting with '$':
 *
 *     $browser - Synthetics-flavored WebDriver session for browser automation
 *     $driver - Main WebDriver public API module
 *     $http - 'request' node.js module (for making HTTP requests)
 *     $util - Common tools to aid with grunt work
 *
 * Feel free to explore, or check out the full documentation for details:
 * https://docs.newrelic.com/docs/synthetics/new-relic-synthetics/scripting-monitors/writing-scripted-browsers
 */

/** CONFIGURATIONS **/

// Script-wide timeout for wait and waitAndFind functions (in ms)
var DefaultTimeout = 10000;
// Change to any User Agent you want to use.
// Leave as "default" or empty to use the Synthetics default.
var UserAgent = "default";

/** HELPER VARIABLES AND FUNCTIONS **/

var assert = require('assert'),
  By = $driver.By,
  browser = $browser.manage(),
  startTime = Date.now(),
  stepStartTime = Date.now(),
  lastMsg = '',
  VARS = {};

var log = function(thisStep, msg) {
   if (thisStep > 0) {
     var lastStep = thisStep - 1;
     var lastStepTimeElapsed = Date.now() - (startTime + stepStartTime);
     console.log('Step ' + lastStep + ': ' + lastMsg + ' FINISHED. It took ' + lastStepTimeElapsed + 'ms to complete.');
     $util.insights.set('Step ' + lastStep + ': ' + lastMsg, lastStepTimeElapsed);
   }
   stepStartTime = Date.now() - startTime;
   console.log('Step ' + thisStep + ': ' + msg + ' STARTED at ' + stepStartTime + 'ms.');
   lastMsg = msg;
 };

function isAlertPresent() {
  try {
    var thisAlert = $browser.switchTo().alert();
    return true;
  } catch (err) { return false; }
}

function isElementSelected(el) { return $browser.findElement(el).isSelected(); }
function isTextPresentIn(text, sourceEl) {
  return sourceEl.getText()
  .then(function (wholetext) {
    return wholetext.indexOf(text) != -1;
  });
}

function isTextPresent(text) {
  return isTextPresentIn(text, $browser.findElement(By.tagName('html')));
}

/** BEGINNING OF SCRIPT **/

log(0, 'init');

// Setting User Agent is not then-able, so we do this first (if defined and not default)
if (UserAgent && (0 !== UserAgent.trim().length) && (UserAgent != 'default')) {
  $browser.addHeader('User-Agent', UserAgent);
  console.log('Setting User-Agent to ' + UserAgent);
}

// Get browser capabilities and do nothing with it, so that we start with a then-able command
$browser.getCapabilities().then(function () { })

// Step 61
.then(function() {
  log(61, '$browser.get("http://52.88.223.59/")');
  return $browser.get("http://52.88.223.59/"); })

// Step 62
.then(function () {
  log(62, 'verifyTextPresent "ISS Tweets"');
  isTextPresent("ISS Tweets").then(function (bool) {
    if (!bool) {
      console.log('verifyTextPresent FAILED.');
      $browser.takeScreenshot();
    } else {
      console.log('verifyTextPresent SUCCEEDED.');
    }
  });
})

// Step 63
.then(function() {
  log(63, 'clickElement "ISS Tweets"');
  return $browser.waitForAndFindElement(By.linkText("ISS Tweets"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 64
.then(function() {
  log(64, 'clickElement "Space Probe Errors Game"');
  return $browser.waitForAndFindElement(By.linkText("Space Probe Errors Game"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 65
.then(function() {
  log(65, 'clickElement "displaySchematics"');
  return $browser.waitForAndFindElement(By.id("displaySchematics"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 66
.then(function() {
  log(6667'clickElement "systemWarning1"');
  return $browser.waitForAndFindElement(By.id("systemWarning1"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 67
.then(function() {
  log(67, 'clickElement "gridSearch4"');
  return $browser.waitForAndFindElement(By.id("gridSearch4"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 68
.then(function() {
  log(68, 'clickElement "gridAlpha"');
  return $browser.waitForAndFindElement(By.id("gridAlpha"), DefaultTimeout); })
.then(function (el) { el.click(); })

>>>>>>>>>>>>>>

// Step 75
.then(function() {
  log(75, 'clickElement "gridAlpha"');
  return $browser.waitForAndFindElement(By.id("gridAlpha"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 76
.then(function() {
  log(76, 'clickElement "gridBeta"');
  return $browser.waitForAndFindElement(By.id("gridBeta"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 77
.then(function() {
  log(77, 'clickElement "gridBeta"');
  return $browser.waitForAndFindElement(By.id("gridBeta"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 78
.then(function() {
  log(78, 'clickElement "gridBeta"');
  return $browser.waitForAndFindElement(By.id("gridBeta"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 79
.then(function() {
  log(79, 'clickElement "Delta004"');
  return $browser.waitForAndFindElement(By.id("Delta004"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 80
.then(function() {
  log(80, 'clickElement "gridSearch4"');
  return $browser.waitForAndFindElement(By.id("gridSearch4"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 81
.then(function() {
  log(81, 'clickElement "a.lcars-button.radius"');
  return $browser.waitForAndFindElement(By.css("a.lcars-button.radius"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 82
.then(function() {
  log(82, 'clickElement "//div[@class=\'lcars-container\']/div[4]/div[4]/div/div[2]/a"');
  return $browser.waitForAndFindElement(By.xpath("//div[@class=\'lcars-container\']/div[4]/div[4]/div/div[2]/a"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 83
.then(function() {
  log(83, 'clickElement "//div[@class=\'lcars-container\']/div[4]/div[4]/div/div[3]/a"');
  return $browser.waitForAndFindElement(By.xpath("//div[@class=\'lcars-container\']/div[4]/div[4]/div/div[3]/a"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 84
.then(function() {
  log(84, 'clickElement "systemCheck1"');
  return $browser.waitForAndFindElement(By.id("systemCheck1"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 85
.then(function() {
  log(85, 'clickElement "systemCheck2"');
  return $browser.waitForAndFindElement(By.id("systemCheck2"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 86
.then(function() {
  log(86, 'clickElement "systemCheck3"');
  return $browser.waitForAndFindElement(By.id("systemCheck3"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 87
.then(function() {
  log(87, 'clickElement "gridSearch1"');
  return $browser.waitForAndFindElement(By.id("gridSearch1"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 88
.then(function() {
  log(88, 'clickElement "gridSearch2"');
  return $browser.waitForAndFindElement(By.id("gridSearch2"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 89
.then(function() {
  log(89, 'clickElement "gridSearch3"');
  return $browser.waitForAndFindElement(By.id("gridSearch3"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 90
.then(function() {
  log(90, 'clickElement "gridSearch4"');
  return $browser.waitForAndFindElement(By.id("gridSearch4"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 91
.then(function() {
  log(91, 'clickElement "displaySchematics"');
  return $browser.waitForAndFindElement(By.id("displaySchematics"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 92
.then(function() {
  log(92, 'clickElement "gridSearch4"');
  return $browser.waitForAndFindElement(By.id("gridSearch4"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 93
.then(function() {
  log(93, 'clickElement "Who\'s in Space?"');
  return $browser.waitForAndFindElement(By.linkText("Who\'s in Space?"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 94
.then(function() {
  log(94, 'clickElement "Where is the ISS?"');
  return $browser.waitForAndFindElement(By.linkText("Where is the ISS?"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 95
.then(function() {
  log(95, 'clickElement "updateISSlocation"');
  return $browser.waitForAndFindElement(By.id("updateISSlocation"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 96
.then(function() {
  log(96, 'clickElement "When will the ISS pass over my head next?"');
  return $browser.waitForAndFindElement(By.linkText("When will the ISS pass over my head next?"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 97
.then(function() {
  log(97, 'clickElement "Where is the ISS right now?"');
  return $browser.waitForAndFindElement(By.linkText("Where is the ISS right now?"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 98
.then(function() {
  log(98, 'clickElement "updateISSlocation"');
  return $browser.waitForAndFindElement(By.id("updateISSlocation"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 99
.then(function() {
  log(99, 'clickElement "Kata Pages"');
  return $browser.waitForAndFindElement(By.linkText("Kata Pages"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 100
.then(function() {
  log(100, 'clickElement "The Many Assets"');
  return $browser.waitForAndFindElement(By.linkText("The Many Assets"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 101
.then(function() {
  log(101, 'clickElement "Kata Pages"');
  return $browser.waitForAndFindElement(By.linkText("Kata Pages"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 102
.then(function() {
  log(102, 'clickElement "The Big List"');
  return $browser.waitForAndFindElement(By.linkText("The Big List"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 103
.then(function() {
  log(103, 'clickElement "Kata Pages"');
  return $browser.waitForAndFindElement(By.linkText("Kata Pages"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 104
.then(function() {
  log(104, 'clickElement "The Loop"');
  return $browser.waitForAndFindElement(By.linkText("The Loop"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 105
.then(function() {
  log(105, 'clickElement "Kata Pages"');
  return $browser.waitForAndFindElement(By.linkText("Kata Pages"), DefaultTimeout); })
.then(function (el) { el.click(); })

// Step 106
.then(function() {
  log(106, 'clickElement "The Cache"');
  return $browser.waitForAndFindElement(By.linkText("The Cache"), DefaultTimeout); })
.then(function (el) { el.click(); })

.then(function() {
  console.log('Browser script execution SUCCEEDED.');
}, function(err) {
  console.log ('Browser script execution FAILED.');
  throw(err);
});

/** END OF SCRIPT **/